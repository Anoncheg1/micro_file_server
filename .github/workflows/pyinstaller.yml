name: Package Application with Pyinstaller

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]


jobs:
  build:
    runs-on: windows-2019

    steps:
    - name: Checkout
    - uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v3
      with:
        python-version: '3.x'
        architecture: 'x64'
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install build
        pip install -r .github/requirements.txt
        # idk what is build
    - name: Create a Release
      uses: elgohr/Github-Release-Action@v5
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        title: MyReleaseMessage

    # - name: create release
    #     id: create_release
    #     uses: actions/create-release@v1
    #     env:
    #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    #     with:
    #       tag_name: ${{ github.event.head_commit.message }}
    #       release_name: ${{ github.event.head_commit.message }}
    #       overwrite: true
    #       body: |
    #         Test Release v1.0.0
    #       draft: false
    #       prerelease: false
    # - name: Build package
    #   run: python -m build
    # - uses: actions/upload-artifact@v2
    #   with:
    #     name: name-of-artifact
    #     path: dist/windows
